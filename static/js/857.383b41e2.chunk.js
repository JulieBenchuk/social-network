"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[857],{2857:function(s,e,o){o.r(e),o.d(e,{default:function(){return Is}});var t=o(8683),n=o(5671),i=o(3144),a=o(136),r=o(5716),l=o(2791),c=o(885),u=o(5987),d="ProfileInfo_profile__XM2oU",f="ProfileInfo_profileInfoBlock__ZTFU2",h=o(5667),p="ProfileData_profile_data__9qsUa",_="ProfileData_description__QBhvE",m="ProfileData_descriptionItem__xMqvG",v="ProfileData_edit__tP1nd",j="ProfileData_descriptionIcon__YzH8V",x="Contact_contact__iBnrC",P="Contact_title__ZKO0l",w="Contact_noValue__GUg0l",k="Contact_value__przRR",N=o(184),g=function(s){var e=s.contactTitle,o=s.contactValue;return(0,N.jsxs)("div",{className:x,children:[(0,N.jsxs)("span",{className:P,children:[e,":"]}),(0,N.jsx)("span",{className:k,children:o||(0,N.jsx)("span",{className:w,children:"no info"})})]})},S=o(9806),b=o(6850),C=o(1632),D=o(8044),A=function(s){var e=s.profile,o=s.isOwner,t=s.setEditMode;return(0,N.jsxs)("div",{className:p,children:[(0,N.jsxs)("div",{className:_,children:[(0,N.jsx)("h2",{children:e.fullName}),(0,N.jsxs)("div",{className:m,children:[(0,N.jsx)(S.G,{icon:b.dLO,className:j}),(0,N.jsx)("b",{children:" About me: "}),e.aboutMe?e.aboutMe:"description is empty"]}),(0,N.jsxs)("div",{className:m,children:[(0,N.jsx)(S.G,{icon:C.Y$T,className:j}),(0,N.jsx)("b",{children:" Looking for a job: "}),e.lookingForAJob?"yes":"no"]}),(0,N.jsxs)("div",{className:m,children:[(0,N.jsx)(S.G,{icon:b.fV7,className:j}),(0,N.jsx)("b",{children:" My skills: : "}),e.lookingForAJobDescription?e.lookingForAJobDescription:"description is empty"]}),(0,N.jsxs)("div",{className:m,children:[(0,N.jsx)(S.G,{icon:C.nNP,className:j}),(0,N.jsx)("b",{children:" Contacts: "}),e.contacts&&Object.keys(e.contacts).map((function(s){return(0,N.jsx)(g,{contactTitle:s,contactValue:e.contacts[s]},s)}))]})]}),o&&(0,N.jsx)("div",{className:v,children:(0,N.jsxs)(D.z,{onClick:t,children:[(0,N.jsx)(S.G,{icon:C.IwR,className:j})," Edit profile"]})})]})},M=o(6139),I=o(704),y=o(8195),Z="ProfileDataForm_error__DYUqN",O="ProfileDataForm_profileDataForm__d4e88",F="ProfileDataForm_dataItem__G17JM",G="ProfileDataForm_checkbox__DO0Uc",U="ProfileDataForm_contacts__xd39g",z=(0,I.Z)({form:"edit_profile"})((function(s){var e=s.handleSubmit,o=s.initialValues,t=s.error;return(0,N.jsx)("div",{className:O,children:(0,N.jsxs)("form",{onSubmit:e,children:[(0,N.jsxs)("div",{className:F,children:[(0,N.jsx)(S.G,{icon:C.xKL}),(0,N.jsx)("b",{children:" Full name: "}),(0,N.jsx)(M.Z,{placeholder:"full name",name:"fullName",component:y.I})]}),(0,N.jsxs)("div",{className:F,children:[(0,N.jsx)(S.G,{icon:b.dLO}),(0,N.jsx)("b",{children:" About me: "}),(0,N.jsx)(M.Z,{placeholder:"about me",name:"aboutMe",component:y.g})]}),(0,N.jsxs)("div",{className:F,children:[(0,N.jsx)(S.G,{icon:C.Y$T}),(0,N.jsx)("b",{children:" Looking for a job: "}),(0,N.jsx)(M.Z,{name:"lookingForAJob",component:y.I,type:"checkbox",className:G})]}),(0,N.jsxs)("div",{className:F,children:[(0,N.jsx)(S.G,{icon:b.fV7}),(0,N.jsx)("b",{children:" My skills: "}),(0,N.jsx)(M.Z,{placeholder:"my skills",name:"lookingForAJobDescription",component:y.g})]}),(0,N.jsxs)("div",{className:F,children:[(0,N.jsx)(S.G,{icon:C.nNP}),(0,N.jsx)("b",{children:" Contacts: "}),(0,N.jsx)("div",{className:U,children:o.contacts&&Object.keys(o.contacts).map((function(s){return(0,N.jsxs)("div",{children:[(0,N.jsxs)("b",{children:[s,":"]}),(0,N.jsx)(M.Z,{placeholder:s,name:"contacts."+s,component:y.I}),t&&(0,N.jsx)("div",{className:Z,children:t})]},s)}))})]}),(0,N.jsx)("div",{children:(0,N.jsxs)(D.z,{children:[(0,N.jsx)(S.G,{icon:C.r6l})," Save"]})})]})})})),B="ModalWindow_modal__8fgAO",T="ModalWindow_modalActive__wdv4Z",W="ModalWindow_modalContent__2aWDg",E="ModalWindow_modalContentActive__Cnauk",L="ModalWindow_modalBlock__zz6+e",R="ModalWindow_buttonsBlock__7vIth",V=function(s){var e=s.active,o=s.setActive,t=s.answerReject,n=s.answerAgree,i=s.question,a=s.agree,r=s.reject;return(0,N.jsx)("div",{className:e?"".concat(B," ").concat(T):B,onClick:function(){return o(!1)},children:(0,N.jsx)("div",{className:e?"".concat(W," ").concat(E):W,onClick:function(s){return s.stopPropagation()},children:(0,N.jsxs)("div",{className:L,children:[(0,N.jsx)("h3",{children:i}),(0,N.jsxs)("div",{className:R,children:[(0,N.jsx)("div",{children:(0,N.jsx)(D.z,{onClick:function(){a()},children:n})}),(0,N.jsx)("div",{children:(0,N.jsx)(D.z,{onClick:function(){r()},children:t})})]})]})})})},Y="ProfileAvatar_avatarBlock__KMlFi",J="ProfileAvatar_profile_avatar__89Ao1",q="ProfileAvatar_onlineStatus__cFZkT",$="ProfileAvatar_followingStatus__QKjJB",K="ProfileAvatar_unfollowingStatus__ad7WL",Q=o(1605),H="ProfileStatus_statusBlock__I--ZY",X="ProfileStatus_status_span__WSn2u",ss="ProfileStatus_status_input__57nHd",es="ProfileStatus_statusIcon__WSEWt",os=function(s){var e=s.status,o=s.updateStatus,t=s.isOwner,n=(0,l.useState)(!1),i=(0,c.Z)(n,2),a=i[0],r=i[1],u=(0,l.useState)(e),d=(0,c.Z)(u,2),f=d[0],h=d[1];return(0,l.useEffect)((function(){h(e)}),[e]),(0,N.jsxs)("h3",{children:[!a&&(0,N.jsx)("div",{className:H,children:(0,N.jsxs)("span",{className:X,onDoubleClick:function(){if(!t)return!1;r(!0)},children:[(0,N.jsx)(S.G,{icon:b.Mzg,className:es}),e?" "+e:" no status"]})}),a&&(0,N.jsx)("div",{children:(0,N.jsx)("input",{className:ss,onChange:function(s){h(s.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),o(f)},placeholder:"status",value:f})})]})},ts=function(s){var e;return(0,N.jsx)("div",{className:Y,children:(0,N.jsxs)("div",{className:J,children:[(0,N.jsx)("img",{src:null!==(e=s.photos)&&void 0!==e&&e.large?s.photos.large:Q,alt:"avatar"}),(0,N.jsx)("div",{className:q,children:"online"}),s.owner&&(0,N.jsx)("input",{id:"upload",type:"file",accept:"image/*",onChange:s.onChange}),!s.owner&&(0,N.jsxs)("div",{className:s.followed?$:"".concat($," ").concat(K),onClick:s.onClick,children:[s.followed?(0,N.jsx)(S.G,{icon:C.kRQ}):(0,N.jsx)(S.G,{icon:C.am0}),s.followed?"following":"unfollowing"]}),(0,N.jsx)(os,{status:s.status,updateStatus:s.updateStatus,isOwner:s.owner})]})})},ns=["profile","updateStatus","status","isOwner","saveSelectedPhoto","saveProfile","users","unfollow","follow"],is=function(s){var e,o=s.profile,t=s.updateStatus,n=s.status,i=s.isOwner,a=s.saveSelectedPhoto,r=s.saveProfile,p=s.users,_=s.unfollow,m=s.follow,v=((0,u.Z)(s,ns),(0,l.useState)(!1)),j=(0,c.Z)(v,2),x=j[0],P=j[1],w=(0,l.useState)(!1),k=(0,c.Z)(w,2),g=k[0],S=k[1],b=null===(e=p.find((function(s){return s.id===o.userId})))||void 0===e?void 0:e.followed;if(!o)return(0,N.jsx)(h.p,{});var C=function(s){S(s)};return(0,N.jsxs)("div",{className:d,children:[(0,N.jsx)(ts,{photos:o.photos,owner:i,onChange:function(s){s.target.files&&s.target.files.length&&a(s.target.files[0])},followed:b,onClick:function(){return C(!0)},status:n,updateStatus:t}),(0,N.jsx)("div",{className:f,children:x?(0,N.jsx)(z,{onSubmit:function(s){r(s),P(!1)},initialValues:o}):(0,N.jsx)(A,{profile:o,isOwner:i,setEditMode:function(){return P(!0)}})}),g&&(0,N.jsx)(V,{active:g,setActive:C,question:"Do you want to ".concat(b?"unfollow":"follow"," ").concat(o.fullName,"?"),answerAgree:"YES, I want",answerReject:"NO, thanks",agree:function(){b?(o.userId&&_(o.userId),S(!1)):(o.userId&&m(o.userId),S(!1))},reject:function(){S(!1)}})]})},as=o(4136),rs="MyPosts_postsBlock__lB-pf",ls="MyPosts_myPostsHeader__Tner+",cs="MyPosts_postElements__T82nL",us="MyPosts_addPostForm__iknOL",ds="MyPosts_newPostContent__A9Fkm",fs="MyPosts_newPostField__8bWil",hs={post:"Post_post__wW6-Y",avatarOfPost:"Post_avatarOfPost__Y5UhE",postContentBlock:"Post_postContentBlock__XoQc-",likeCount:"Post_likeCount__kwfc5"},ps=function(s){var e=s.id,o=s.post,t=s.likeCount,n=s.onLikePost,i=s.avatar;s.img;return(0,N.jsxs)("div",{className:hs.post,children:[(0,N.jsx)("div",{className:hs.avatarOfPost,children:(0,N.jsx)("img",{src:i||Q})}),(0,N.jsxs)("div",{className:hs.postContentBlock,children:[(0,N.jsx)("div",{className:hs.postText,children:o}),(0,N.jsxs)("div",{className:hs.likeCount,onClick:function(){n(e,t)},children:[(0,N.jsx)(S.G,{icon:C.m6i}),(0,N.jsx)("span",{children:t})]})]})]})},_s=l.memo(ps),ms=o(3079);var vs=["addPost","posts","likePost","profilePhoto"],js=(0,ms.D)(30),xs=function(s){var e=s.addPost,o=s.posts,t=s.likePost,n=s.profilePhoto,i=((0,u.Z)(s,vs),(0,l.useMemo)((function(){return function(s,e){for(var o=[],t=0;t<e;t++){var n=Math.ceil(Math.random()*(s.length-0)+0);o.push(n)}return console.log(o),o}(o,3)}),[])),a=(0,l.useMemo)((function(){return o.filter((function(s){return i.includes(s.id)}))}),[o]).map((function(s,e){return(0,N.jsx)(_s,{id:s.id,post:s.post,avatar:n,img:s.img,likeCount:s.likeCount,onLikePost:function(){return e=s.id,o=s.likeCount+1,void t(e,o);var e,o}},e)}));return(0,N.jsxs)("div",{className:rs,children:[(0,N.jsx)("h3",{className:ls,children:"POSTS"}),(0,N.jsx)(ws,{onSubmit:function(s){e(s.newPostText)}}),(0,N.jsx)("div",{className:cs,children:a})]})},Ps=l.memo(xs),ws=(0,I.Z)({form:"ProfileAddNewPostFormRedux"})((function(s){return(0,N.jsxs)("form",{className:us,onSubmit:s.handleSubmit,children:[(0,N.jsx)("div",{className:ds,children:(0,N.jsx)(M.Z,{component:y.g,name:"newPostText",placeholder:"What's new?",validate:[ms.C,js],className:fs})}),(0,N.jsx)("div",{children:(0,N.jsx)(D.z,{children:"Add post"})})]})})),ks=o(8687),Ns=(0,ks.$j)((function(s){var e;return{posts:s.profilePage.posts,profilePhoto:null===(e=s.profilePage.profile.photos)||void 0===e?void 0:e.large}}),(function(s){return{addPost:function(e){s((0,as.Pi)(e))},likePost:function(e,o){s((0,as.T9)(e,o))}}}))(Ps),gs="Profile_profile__VHbzQ",Ss=function(s){var e=s.userID,o=s.profile,t=s.status,n=s.updateStatus,i=s.isOwner,a=s.saveSelectedPhoto,r=s.saveProfile,l=s.users,c=s.unfollow,u=s.follow;return(0,N.jsxs)("div",{className:gs,children:[(0,N.jsx)(is,{profile:o,status:t,updateStatus:n,isOwner:i,saveSelectedPhoto:a,saveProfile:r,userID:e,users:l,unfollow:c,follow:u}),(0,N.jsx)(Ns,{})]})},bs=o(9271),Cs=o(2932),Ds=o(7781),As=o(6342),Ms=function(s){(0,a.Z)(o,s);var e=(0,r.Z)(o);function o(){var s;(0,n.Z)(this,o);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(s=e.call.apply(e,[this].concat(i))).follow=function(e){s.props.follow(e)},s.unfollow=function(e){s.props.unfollow(e)},s}return(0,i.Z)(o,[{key:"refreshProfile",value:function(){var s=this.props.match.params.userID;s||(s=this.props.authorizedUserID)||this.props.history.push("/login"),this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e,o){var t,n;this.props.match.params.userID===s.match.params.userID&&(null===(t=this.props.profile.photos)||void 0===t?void 0:t.large)===(null===(n=s.profile.photos)||void 0===n?void 0:n.large)||this.refreshProfile()}},{key:"render",value:function(){return(0,N.jsx)(Ss,(0,t.Z)((0,t.Z)({},this.props),{},{userID:this.props.authorizedUserID,isOwner:!this.props.match.params.userID,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,saveSelectedPhoto:this.props.saveSelectedPhoto,users:this.props.users,unfollow:this.unfollow,follow:this.follow}))}}]),o}(l.Component),Is=(0,Ds.qC)((0,ks.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,isAuth:s.auth.isAuth,authorizedUserID:s.auth.id,users:s.usersPage.users}}),{getUserProfile:as.d$,getUserStatus:as.GP,updateStatus:as.OG,saveSelectedPhoto:as.CR,saveProfile:as.Ms,follow:As.iR,unfollow:As.Ky}),bs.EN,Cs.D)(Ms)},2932:function(s,e,o){o.d(e,{D:function(){return u}});var t=o(8683),n=o(5987),i=(o(2791),o(9271)),a=o(8687),r=o(184),l=["isAuth"],c=function(s){return{isAuth:s.auth.isAuth}};function u(s){return(0,a.$j)(c)((function(e){var o=e.isAuth,a=(0,n.Z)(e,l);return o?(0,r.jsx)(s,(0,t.Z)({},a)):(0,r.jsx)(i.l_,{to:"/login"})}))}},1605:function(s,e,o){s.exports=o.p+"static/media/avatar_default.2ca07d6b63661cd127d5.webp"}}]);
//# sourceMappingURL=857.383b41e2.chunk.js.map
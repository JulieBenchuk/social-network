"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[287],{4287:function(e,s,o){o.r(s),o.d(s,{default:function(){return Ae}});var t=o(8683),n=o(5671),a=o(3144),i=o(136),r=o(5716),l=o(2791),c=o(885),u=o(5987),d="ProfileInfo_profile__XM2oU",f="ProfileInfo_profileInfoBlock__ZTFU2",h=o(5667),p="ProfileData_profile_data__9qsUa",_="ProfileData_description__QBhvE",m="ProfileData_descriptionItem__xMqvG",v="ProfileData_edit__tP1nd",j="ProfileData_descriptionIcon__YzH8V",x="Contact_contact__iBnrC",P="Contact_title__ZKO0l",w="Contact_noValue__GUg0l",N="Contact_value__przRR",k=o(184),g=function(e){var s=e.contactTitle,o=e.contactValue;return(0,k.jsxs)("div",{className:x,children:[(0,k.jsxs)("span",{className:P,children:[s,":"]}),(0,k.jsx)("span",{className:N,children:o||(0,k.jsx)("span",{className:w,children:"no info"})})]})},S=o(9806),C=o(6850),b=o(1632),D=o(8044),M=function(e){var s=e.profile,o=e.isOwner,t=e.setEditMode;return(0,k.jsxs)("div",{className:p,children:[(0,k.jsxs)("div",{className:_,children:[(0,k.jsx)("h2",{children:s.fullName}),(0,k.jsxs)("div",{className:m,children:[(0,k.jsx)(S.G,{icon:C.dLO,className:j}),(0,k.jsx)("b",{children:" About me: "}),s.aboutMe?s.aboutMe:"description is empty"]}),(0,k.jsxs)("div",{className:m,children:[(0,k.jsx)(S.G,{icon:b.Y$T,className:j}),(0,k.jsx)("b",{children:" Looking for a job: "}),s.lookingForAJob?"yes":"no"]}),(0,k.jsxs)("div",{className:m,children:[(0,k.jsx)(S.G,{icon:C.fV7,className:j}),(0,k.jsx)("b",{children:" My skills: "}),s.lookingForAJobDescription?s.lookingForAJobDescription:"description is empty"]}),(0,k.jsxs)("div",{className:m,children:[(0,k.jsx)(S.G,{icon:b.nNP,className:j}),(0,k.jsx)("b",{children:" Contacts: "}),s.contacts&&Object.keys(s.contacts).map((function(e){return(0,k.jsx)(g,{contactTitle:e,contactValue:s.contacts[e]},e)}))]})]}),o&&(0,k.jsx)("div",{className:v,children:(0,k.jsxs)(D.z,{onClick:t,children:[(0,k.jsx)(S.G,{icon:b.IwR,className:j})," Edit profile"]})})]})},A=o(6139),I=o(704),y=o(8195),Z="ProfileDataForm_error__DYUqN",O="ProfileDataForm_profileDataForm__d4e88",F="ProfileDataForm_dataItem__G17JM",G="ProfileDataForm_checkbox__DO0Uc",T="ProfileDataForm_contacts__xd39g",U=(0,I.Z)({form:"edit_profile"})((function(e){var s=e.handleSubmit,o=e.initialValues,t=e.error;return(0,k.jsx)("div",{className:O,children:(0,k.jsxs)("form",{onSubmit:s,children:[(0,k.jsxs)("div",{className:F,children:[(0,k.jsx)(S.G,{icon:b.xKL}),(0,k.jsx)("b",{children:" Full name: "}),(0,k.jsx)(A.Z,{placeholder:"full name",name:"fullName",component:y.I})]}),(0,k.jsxs)("div",{className:F,children:[(0,k.jsx)(S.G,{icon:C.dLO}),(0,k.jsx)("b",{children:" About me: "}),(0,k.jsx)(A.Z,{placeholder:"about me",name:"aboutMe",component:y.g})]}),(0,k.jsxs)("div",{className:F,children:[(0,k.jsx)(S.G,{icon:b.Y$T}),(0,k.jsx)("b",{children:" Looking for a job: "}),(0,k.jsx)(A.Z,{name:"lookingForAJob",component:y.I,type:"checkbox",className:G})]}),(0,k.jsxs)("div",{className:F,children:[(0,k.jsx)(S.G,{icon:C.fV7}),(0,k.jsx)("b",{children:" My skills: "}),(0,k.jsx)(A.Z,{placeholder:"my skills",name:"lookingForAJobDescription",component:y.g})]}),(0,k.jsxs)("div",{className:F,children:[(0,k.jsx)(S.G,{icon:b.nNP}),(0,k.jsx)("b",{children:" Contacts: "}),(0,k.jsx)("div",{className:T,children:o.contacts&&Object.keys(o.contacts).map((function(e){return(0,k.jsxs)("div",{children:[(0,k.jsxs)("b",{children:[e,":"]}),(0,k.jsx)(A.Z,{placeholder:e,name:"contacts."+e,component:y.I}),t&&(0,k.jsx)("div",{className:Z,children:t})]},e)}))})]}),(0,k.jsx)("div",{children:(0,k.jsxs)(D.z,{children:[(0,k.jsx)(S.G,{icon:b.r6l})," Save"]})})]})})})),z="ModalWindow_modal__8fgAO",B="ModalWindow_modalActive__wdv4Z",W="ModalWindow_modalContent__2aWDg",E="ModalWindow_modalContentActive__Cnauk",L="ModalWindow_modalBlock__zz6+e",V="ModalWindow_buttonsBlock__7vIth",R=function(e){var s=e.active,o=e.setActive,t=e.answerReject,n=e.answerAgree,a=e.question,i=e.agree,r=e.reject;return(0,k.jsx)("div",{className:s?"".concat(z," ").concat(B):z,onClick:function(){return o(!1)},children:(0,k.jsx)("div",{className:s?"".concat(W," ").concat(E):W,onClick:function(e){return e.stopPropagation()},children:(0,k.jsxs)("div",{className:L,children:[(0,k.jsx)("h3",{children:a}),(0,k.jsxs)("div",{className:V,children:[(0,k.jsx)("div",{children:(0,k.jsx)(D.z,{onClick:function(){i()},children:n})}),(0,k.jsx)("div",{children:(0,k.jsx)(D.z,{onClick:function(){r()},children:t})})]})]})})})},Y="ProfileAvatar_avatarBlock__KMlFi",J="ProfileAvatar_profile_avatar__89Ao1",q="ProfileAvatar_onlineStatus__cFZkT",$="ProfileAvatar_followingStatus__QKjJB",K="ProfileAvatar_unfollowingStatus__ad7WL",Q=o(1605),H="ProfileStatus_statusBlock__I--ZY",X="ProfileStatus_status_span__WSn2u",ee="ProfileStatus_status_input__57nHd",se="ProfileStatus_statusIcon__WSEWt",oe=function(e){var s=e.status,o=e.updateStatus,t=e.isOwner,n=(0,l.useState)(!1),a=(0,c.Z)(n,2),i=a[0],r=a[1],u=(0,l.useState)(s),d=(0,c.Z)(u,2),f=d[0],h=d[1];return(0,l.useEffect)((function(){h(s)}),[s]),(0,k.jsxs)("h3",{children:[!i&&(0,k.jsx)("div",{className:H,children:(0,k.jsxs)("span",{className:X,onDoubleClick:function(){if(!t)return!1;r(!0)},children:[(0,k.jsx)(S.G,{icon:C.Mzg,className:se}),s?" "+s:" no status"]})}),i&&(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:ee,onChange:function(e){h(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),o(f)},placeholder:"status",value:f})})]})},te=function(e){var s;return(0,k.jsx)("div",{className:Y,children:(0,k.jsxs)("div",{className:J,children:[(0,k.jsx)("img",{src:null!==(s=e.photos)&&void 0!==s&&s.large?e.photos.large:Q,alt:"avatar"}),(0,k.jsx)("div",{className:q,children:"online"}),e.owner&&(0,k.jsx)("input",{id:"upload",type:"file",accept:"image/*",onChange:e.onChange}),!e.owner&&(0,k.jsxs)("div",{className:e.followed?$:"".concat($," ").concat(K),onClick:e.onClick,children:[e.followed?(0,k.jsx)(S.G,{icon:b.kRQ}):(0,k.jsx)(S.G,{icon:b.am0}),e.followed?"following":"unfollowing"]}),(0,k.jsx)(oe,{status:e.status,updateStatus:e.updateStatus,isOwner:e.owner})]})})},ne=["profile","updateStatus","status","isOwner","saveSelectedPhoto","saveProfile","users","unfollow","follow"],ae=function(e){var s,o=e.profile,t=e.updateStatus,n=e.status,a=e.isOwner,i=e.saveSelectedPhoto,r=e.saveProfile,p=e.users,_=e.unfollow,m=e.follow,v=((0,u.Z)(e,ne),(0,l.useState)(!1)),j=(0,c.Z)(v,2),x=j[0],P=j[1],w=(0,l.useState)(!1),N=(0,c.Z)(w,2),g=N[0],S=N[1],C=null===(s=p.find((function(e){return e.id===o.userId})))||void 0===s?void 0:s.followed;if(!o)return(0,k.jsx)(h.p,{});var b=function(e){S(e)};return(0,k.jsxs)("div",{className:d,children:[(0,k.jsx)(te,{photos:o.photos,owner:a,onChange:function(e){e.target.files&&e.target.files.length&&i(e.target.files[0])},followed:C,onClick:function(){return b(!0)},status:n,updateStatus:t}),(0,k.jsx)("div",{className:f,children:x?(0,k.jsx)(U,{onSubmit:function(e){r(e),P(!1)},initialValues:o}):(0,k.jsx)(M,{profile:o,isOwner:a,setEditMode:function(){return P(!0)}})}),g&&(0,k.jsx)(R,{active:g,setActive:b,question:"Do you want to ".concat(C?"unfollow":"follow"," ").concat(o.fullName,"?"),answerAgree:"YES, I want",answerReject:"NO, thanks",agree:function(){C?(o.userId&&_(o.userId),S(!1)):(o.userId&&m(o.userId),S(!1))},reject:function(){S(!1)}})]})},ie=o(4136),re="MyPosts_postsBlock__lB-pf",le="MyPosts_myPostsHeader__Tner+",ce="MyPosts_postElements__T82nL",ue="MyPosts_addPostForm__iknOL",de="MyPosts_newPostContent__A9Fkm",fe="MyPosts_newPostField__8bWil",he={post:"Post_post__wW6-Y",avatarOfPost:"Post_avatarOfPost__Y5UhE",postContentBlock:"Post_postContentBlock__XoQc-",likeCount:"Post_likeCount__kwfc5",heart:"Post_heart__joVNs"},pe=function(e){var s=e.id,o=e.post,t=e.likeCount,n=e.onLikePost,a=e.avatar;e.img;return(0,k.jsxs)("div",{className:he.post,children:[(0,k.jsx)("div",{className:he.avatarOfPost,children:(0,k.jsx)("img",{src:a||Q})}),(0,k.jsxs)("div",{className:he.postContentBlock,children:[(0,k.jsx)("div",{className:he.postText,children:o}),(0,k.jsxs)("div",{className:he.likeCount,onClick:function(){n(s,t)},children:[(0,k.jsx)(S.G,{icon:b.m6i,className:he.heart}),(0,k.jsx)("span",{children:t})]})]})]})},_e=l.memo(pe),me=o(3079);var ve=(0,me.D)(30),je=function(e){var s=e.addPost,o=e.posts,t=e.likePost,n=e.profilePhoto,a=(0,l.useState)([]),i=(0,c.Z)(a,2),r=i[0],u=i[1],d=(0,l.useMemo)((function(){return function(e,s){for(var o=[],t=0;t<s;t++){var n=Math.ceil(Math.random()*e.length);o.push(n)}return console.log(o),o}(o,3)}),[]),f=(0,l.useMemo)((function(){return r.concat(o.filter((function(e){return d.includes(e.id)})))}),[o,r]).map((function(e,s){return(0,k.jsx)(_e,{id:e.id,post:e.post,avatar:n,img:e.img,likeCount:e.likeCount,onLikePost:function(){return s=e.id,o=e.likeCount+1,t(s,o),void r.map((function(e){return e.id===s?e.likeCount++:e}));var s,o}},s)}));return(0,k.jsxs)("div",{className:re,children:[(0,k.jsx)("h3",{className:le,children:"POSTS"}),(0,k.jsx)(Pe,{onSubmit:function(e){s(e.newPostText),r.unshift({id:Math.ceil(1e4*Math.random()),post:e.newPostText,likeCount:0}),u(r),e.newPostText=""}}),(0,k.jsx)("div",{className:ce,children:f})]})},xe=l.memo(je),Pe=(0,I.Z)({form:"ProfileAddNewPostFormRedux"})((function(e){return(0,k.jsxs)("form",{className:ue,onSubmit:e.handleSubmit,children:[(0,k.jsx)("div",{className:de,children:(0,k.jsx)(A.Z,{component:y.g,name:"newPostText",placeholder:"What's new?",validate:[me.C,ve],className:fe})}),(0,k.jsx)("div",{children:(0,k.jsx)(D.z,{children:"Add post"})})]})})),we=o(8687),Ne=(0,we.$j)((function(e){var s;return{posts:e.profilePage.posts,profilePhoto:null===(s=e.profilePage.profile.photos)||void 0===s?void 0:s.large}}),(function(e){return{addPost:function(s){e((0,ie.Pi)(s))},likePost:function(s,o){e((0,ie.T9)(s,o))}}}))(xe),ke="Profile_profile__VHbzQ",ge=function(e){var s=e.userID,o=e.profile,t=e.status,n=e.updateStatus,a=e.isOwner,i=e.saveSelectedPhoto,r=e.saveProfile,l=e.users,c=e.unfollow,u=e.follow;return(0,k.jsxs)("div",{className:ke,children:[(0,k.jsx)(ae,{profile:o,status:t,updateStatus:n,isOwner:a,saveSelectedPhoto:i,saveProfile:r,userID:s,users:l,unfollow:c,follow:u}),(0,k.jsx)(Ne,{})]})},Se=o(9271),Ce=o(2932),be=o(7781),De=o(6342),Me=function(e){(0,i.Z)(o,e);var s=(0,r.Z)(o);function o(){var e;(0,n.Z)(this,o);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=s.call.apply(s,[this].concat(a))).follow=function(s){e.props.follow(s)},e.unfollow=function(s){e.props.unfollow(s)},e}return(0,a.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userID;e||(e=this.props.authorizedUserID)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s,o){var t,n;this.props.match.params.userID===e.match.params.userID&&(null===(t=this.props.profile.photos)||void 0===t?void 0:t.large)===(null===(n=e.profile.photos)||void 0===n?void 0:n.large)||this.refreshProfile()}},{key:"render",value:function(){return(0,k.jsx)(ge,(0,t.Z)((0,t.Z)({},this.props),{},{userID:this.props.authorizedUserID,isOwner:!this.props.match.params.userID,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,saveSelectedPhoto:this.props.saveSelectedPhoto,users:this.props.users,unfollow:this.unfollow,follow:this.follow}))}}]),o}(l.Component),Ae=(0,be.qC)((0,we.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserID:e.auth.id,users:e.usersPage.users}}),{getUserProfile:ie.d$,getUserStatus:ie.GP,updateStatus:ie.OG,saveSelectedPhoto:ie.CR,saveProfile:ie.Ms,follow:De.iR,unfollow:De.Ky}),Se.EN,Ce.D)(Me)},2932:function(e,s,o){o.d(s,{D:function(){return u}});var t=o(8683),n=o(5987),a=(o(2791),o(9271)),i=o(8687),r=o(184),l=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function u(e){return(0,i.$j)(c)((function(s){var o=s.isAuth,i=(0,n.Z)(s,l);return o?(0,r.jsx)(e,(0,t.Z)({},i)):(0,r.jsx)(a.l_,{to:"/login"})}))}},1605:function(e,s,o){e.exports=o.p+"static/media/avatar_default.2ca07d6b63661cd127d5.webp"}}]);
//# sourceMappingURL=287.063d2123.chunk.js.map